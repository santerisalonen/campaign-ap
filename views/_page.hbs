<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
               
        <script src="js/build.js"></script>

        <link type="text/css" rel="stylesheet" href="css/build.css"/>
        
        <title>{{entry.title}}</title>
    
    </head>
        
    <body id="page">
        
    <div class="container">
        
      <a href="http://www.apollomatkat.fi">
        <img src="//cdn-prod-blue-www.apollomatkat.fi/v-eb2616cbc9895159b7ed1aaee3e5b822/content/themes/apollo/content/img/logo_without_slogan2.png" alt="Apollomatkat" />   
      </a>
    
    </div>
      
    
    <div class="container content-block">
       
     <div class="col-xs-12 lead-img">
      
        <img src="/img/goa-crop.jpg" width="100%" />
       
      </div>
      
      <div class="col-md-6">
        <span class="marked">{{entry.body}}</span>


      </div>
      <div class="col-md-6">
        
        <h3>{{#if entry.ctaHeading}} {{entry.ctaHeading}} {{else}} Liity uutiskirjeen tilaajaksi ja saat heti alennuskoodin sähköpostiisi {{/if}}</h3>
        
        <p>Uutiskirjeen tilaajana saat tiedon myös muista matkatarjouksistamme ennen muita.</p>
        
        <form name="subscribe" netlify-honeypot="bot-field" action="thank-you" id="subscribe-form" netlify>

          <span class="hidden">
              <label for="bot-field">Älä täytä tätä kenttää: <input name="bot-field" class="form-control" /></label>
          </span>

          <div class="form-group">

            <label for="etunimi">Etunimi</label>
            <input type="text" class="form-control" name="etunimi" id="etunimi">

          </div>
          <div class="form-group">
            <label for="sukunimi">Sukunimi</label>
            <input type="text" class="form-control" name="sukunimi" id="sukunimi">
          </div>
          <div class="form-group">    

            <label for="email">Sähköposti</label>
            <input type="email" class="form-control" aria-describedby="emailHelp" name="email" id="email">
            <small id="emailHelp" class="form-text text-muted">Yhteystietojasi ei luovuteta ikinä muille.</small>

          </div>

          <div class="form-group">
            <label>Koska ajattelit lähteä lomalle?</label>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="travel_time[]" value="autumn_2017"> Kesällä tai syksyllä 2017              
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="travel_time[]" value="winter_2017_2018"> Talvella 2017/2018
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" name="travel_time[]" value="later"> Myöhemmin
              </label>
            </div>
          </div>

          <button type="submit" class="btn btn-lg btn-primary">{{#if entry.ctaButtonText}} {{entry.ctaButtonText}} {{else}} Liity nyt {{/if}}</button>
        </form>

        <script>
        $(document).ready(function() {
          
          
          $("#subscribe-form").validate({
            rules: {
              etunimi: { required: true },
              sukunimi: { required: true },
              email: { required: true, email: true }
            },
            messages: {
              etunimi: { required: "Etunimi puuttuu" },
              sukunimi: { required: "Sukunimi puuttuu"  },
              email: { required: "Sähköpostiosoite puuttuu" }
            },
            submitHandler: function(form, e) {
              e.preventDefault();
              
              var $button = $(form).find('button');
              $button.addClass('disabled');
              $button.addClass('btn-success');
              $button.removeClass('btn-primary');
              $button.html('SENT!')
              
              $.post($(form).attr("action"), $(form).serialize()).then(function() {
              
                // TODO
                // dataLayer push
                // extract selected checkboxes for segmentation
                
                alert("Thank you!");
                
              });
              

            }
          });
           
            

        });
        </script>

      </div>
    </div>
      
    <div class="container content-block" id="item-grid" style="display:none">  
    

      
      <div class="col-xs-12">
          <h3>Tutustu lomavalikoimaamme</h3>
      </div>     
        
      </div>
      
      <script>
      $(document).ready(function() {
        
        $.ajax( {
          url : 'https://xs1gc6anuj.execute-api.eu-west-1.amazonaws.com/v1/apollomatkat_fi/public/hotels_fb',
          method : 'GET',
          success : function(result) {
            
            var items = [];
            
            for( var i = 0; i < result.length && i < 6; i++) {
              var item = result[i];
              var html = '<div class="col-xs-6 col-md-4">';
              html += '<a href="' + item.link + '">'
              html += '<img src="' + item.image_link + '" />';
              html += '<h4>' + item.title + '</h4>'
              html += '</a>';
              html += '<p>' + item.custom_label_0 + '</p>';
              html += '</div>';
              items.push(html);
            }
            
            $('#item-grid').append( items.join('') );
            $('#item-grid').fadeIn("slow");
          }       
        })
        
      });
      
      
      </script>
      
    </div>
      
    

    <div class="container-fluid" id="footer">
    
    </div>

    </body>
</html>